
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Test Jigs &#8212; Sistemi Lente/Prism Test System 0.2.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/classic.css" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Security" href="_security.html" />
    <link rel="prev" title="Development" href="_development.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="_security.html" title="Security"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="_development.html" title="Development"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Sistemi Lente/Prism Test System 0.2.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Test Jigs</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="test-jigs">
<h1>Test Jigs<a class="headerlink" href="#test-jigs" title="Permalink to this headline">¶</a></h1>
<p>Test Jigs are used in production to test your product, which is referred to as Device Under Test (DUT).
These are custom designed fixtures that interface your product (DUT) to the Prism programs.</p>
<p>In general, it is your responsibility to develop your own test jigs based on your requirements.
Sistemi (in general) does not build jigs.  That being said, Sistemi has a reference platform that you may
be able to use, perhaps with some modifications.</p>
<img alt="_images/Screenshot_jigs_01.png" src="_images/Screenshot_jigs_01.png" />
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#definitions" id="id1">Definitions</a></p>
<ul>
<li><p><a class="reference internal" href="#interface-board" id="id2">Interface Board</a></p></li>
<li><p><a class="reference internal" href="#interface-controller" id="id3">Interface Controller</a></p></li>
<li><p><a class="reference internal" href="#bed-of-nails" id="id4">Bed of Nails</a></p></li>
<li><p><a class="reference internal" href="#nest" id="id5">Nest</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#considerations" id="id6">Considerations</a></p></li>
<li><p><a class="reference internal" href="#micropython-interface-board-iba01" id="id7">MicroPython Interface Board IBA01</a></p>
<ul>
<li><p><a class="reference internal" href="#micropython-pin-mux" id="id8">MicroPython Pin Mux</a></p></li>
<li><p><a class="reference internal" href="#d-view" id="id9">3D View</a></p></li>
<li><p><a class="reference internal" href="#probe-board-grid-pattern" id="id10">Probe Board Grid Pattern</a></p></li>
<li><p><a class="reference internal" href="#schematic" id="id11">Schematic</a></p></li>
<li><p><a class="reference internal" href="#ubuntu-install" id="id12">Ubuntu Install</a></p></li>
<li><p><a class="reference internal" href="#configuring-micropython-board" id="id13">Configuring MicroPython Board</a></p></li>
</ul>
</li>
</ul>
</div>
<section id="definitions">
<h2><a class="toc-backref" href="#id1">Definitions</a><a class="headerlink" href="#definitions" title="Permalink to this headline">¶</a></h2>
<section id="interface-board">
<h3><a class="toc-backref" href="#id2">Interface Board</a><a class="headerlink" href="#interface-board" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>A Printed Circuit Board (PCB) that has spring probes and some type of controller that
the Prism can talk to, to take measurements, and otherwise control the stimulus to the DUT.</p></li>
<li><p>Are custom developed depending on the DUT requirements</p>
<ul>
<li><p>Sistemi has developed a reference design based on MicroPython board, see TBD</p></li>
</ul>
</li>
</ul>
</section>
<section id="interface-controller">
<h3><a class="toc-backref" href="#id3">Interface Controller</a><a class="headerlink" href="#interface-controller" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>A device with USB connectivity and a processor in which Prism can control and
otherwise interface to</p></li>
<li><p>Examples that could be used, Arduino, MicroPython, RaspBerry Pi, etc</p></li>
<li><p>An <code class="docutils literal notranslate"><span class="pre">Interface</span> <span class="pre">Controller</span></code> may be designed into the <code class="docutils literal notranslate"><span class="pre">Interface</span> <span class="pre">Board</span></code> or
it can be a daughter card that plugs into an <code class="docutils literal notranslate"><span class="pre">Interface</span> <span class="pre">Board</span></code></p>
<ul>
<li><p>Sistemi has developed a reference design based on MicroPython board, see TBD</p></li>
</ul>
</li>
</ul>
</section>
<section id="bed-of-nails">
<h3><a class="toc-backref" href="#id4">Bed of Nails</a><a class="headerlink" href="#bed-of-nails" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>An arrangement of spring mounted probes that make electrical connection to the DUT</p></li>
<li><p>the DUT has test points, which are large pads that the spring probes will make contact with</p></li>
</ul>
</section>
<section id="nest">
<h3><a class="toc-backref" href="#id5">Nest</a><a class="headerlink" href="#nest" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>A landing site for the DUT</p></li>
<li><p>designed to make alignment between the Bed of Nails and the DUT test points</p></li>
</ul>
</section>
</section>
<section id="considerations">
<h2><a class="toc-backref" href="#id6">Considerations</a><a class="headerlink" href="#considerations" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Bed of Nails (probes) can wear out over time, you may want to consider a design that
allows the Bed Of Nails to be replaced.  This ultimately depends on the cost of replacement.</p></li>
</ul>
</section>
<section id="micropython-interface-board-iba01">
<h2><a class="toc-backref" href="#id7">MicroPython Interface Board IBA01</a><a class="headerlink" href="#micropython-interface-board-iba01" title="Permalink to this headline">¶</a></h2>
<p>NOTE: This is a work in progress and incomplete.</p>
<p>This is a reference design that you may or may not be able to use, depending on your DUT testing
requirements.  The intent here is to re-use this design to bootstrap your test jig design.</p>
<p>This design is open sourced on CircuitMaker tool.  This tool allows you to fork the design, make it your own.</p>
<p>There are two boards, one is the MicroPython Interface board, the other is a Probe Board.  Ribbon
cable makes the connection between the two boards.  The probe positions are on a separate board to allow them
to change without affecting the layout of the Interface Board, and to accommodate the test jig design.</p>
<p>The idea is that when you design your PCB, you place test points on the grid pattern of the probe points
without concern for the function (measurement or stimulous) type of the probe point.
<strong>Although you must take care that all the functions you do need can be addressed by the MicroPython Interface board.</strong></p>
<p>During the test jig development cycle you can use the IBA01 and manually wire connections from the probe
points to the function on the MicroPython board.  The IBA01 design also includes a prototyping area so
that you could also manually assemble extra functions.</p>
<p>Finally once the development is done, you fork this MicroPython Interface design and make the PCB connections.
You may also use the IBA01 design in production if that works for you.</p>
<p>If the test point grid for V1 doesn’t meet your needs, or the pin mux capability of the MicroPython board
doesn’t have all the features you need, then you will have to design your own interface board.</p>
<section id="micropython-pin-mux">
<h3><a class="toc-backref" href="#id8">MicroPython Pin Mux</a><a class="headerlink" href="#micropython-pin-mux" title="Permalink to this headline">¶</a></h3>
<p>Full information is here <a class="reference external" href="https://docs.micropython.org/en/latest/pyboard/quickref.html">https://docs.micropython.org/en/latest/pyboard/quickref.html</a></p>
<img alt="_images/Screenshot_upybrd_01.png" src="_images/Screenshot_upybrd_01.png" />
</section>
<section id="d-view">
<h3><a class="toc-backref" href="#id9">3D View</a><a class="headerlink" href="#d-view" title="Permalink to this headline">¶</a></h3>
<img alt="_images/micropythonboard_a0103.PNG" src="_images/micropythonboard_a0103.PNG" />
<ul class="simple">
<li><p>The MicroPython board is in the upper right corner (a 3D model was not available)</p></li>
<li><p>There are two through hole headers below the MicroPython board that connect signals to the Probe Board</p></li>
</ul>
<img alt="_images/ProbeBoard_a0201_3d.PNG" src="_images/ProbeBoard_a0201_3d.PNG" />
<ul class="simple">
<li><p>The two DIP headers connect signals between the two boards</p></li>
</ul>
</section>
<section id="probe-board-grid-pattern">
<h3><a class="toc-backref" href="#id10">Probe Board Grid Pattern</a><a class="headerlink" href="#probe-board-grid-pattern" title="Permalink to this headline">¶</a></h3>
<p>Image gridline is 25mils.</p>
<img alt="_images/ProbeBoard_a0201.PNG" src="_images/ProbeBoard_a0201.PNG" />
<p>None of these probe points are wired to any function on the MicroPython Interface Board V1.  There are convenient
landing sites on the PCB however to make it easy to attach a wire to every probe point.</p>
</section>
<section id="schematic">
<h3><a class="toc-backref" href="#id11">Schematic</a><a class="headerlink" href="#schematic" title="Permalink to this headline">¶</a></h3>
<p>The complete schematic is available to be forked on CircuitMaker.
The Schematic and PCB layout are in PDF form in ./public/prism/drivers/iba01</p>
</section>
<section id="ubuntu-install">
<h3><a class="toc-backref" href="#id12">Ubuntu Install</a><a class="headerlink" href="#ubuntu-install" title="Permalink to this headline">¶</a></h3>
<p>Make sure the Python requirements have been loaded:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip3</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>Disable modemmanager as it interferes with MicroPython PyBoard:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">purge</span> <span class="n">modemmanager</span>
</pre></div>
</div>
</section>
<section id="configuring-micropython-board">
<h3><a class="toc-backref" href="#id13">Configuring MicroPython Board</a><a class="headerlink" href="#configuring-micropython-board" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p>How to setup a “fresh” MicroPython Pyboard ver 1.1 for use with Sistemi Prism:</p></li>
</ol>
<ul class="simple">
<li><p>Change to directory,</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">git</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">prism</span><span class="o">/</span><span class="n">drivers</span><span class="o">/</span><span class="n">iba01</span>
</pre></div>
</div>
<ul class="simple">
<li><dl class="simple">
<dt>Boot the Pyboard into DFU mode, by shorting the 3V3 pin to the BOOT0 pin and resetting (button) the board.</dt><dd><p>See <a class="reference external" href="https://github.com/micropython/micropython/wiki/Pyboard-Firmware-Update">https://github.com/micropython/micropython/wiki/Pyboard-Firmware-Update</a></p>
</dd>
</dl>
</li>
<li><p>Update the firmware with this command,</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo python3 pydfu.py -m -u pybv11-thread-20190730-v1.11-182-g7c15e50eb.dfu
</pre></div>
</div>
<ol class="arabic" start="2">
<li><p>All files names iba01_*.py need to be copied to the MicroPyboard.
Use rshell.</p>
<p>example rshell session:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>martin@martin-Lenovo:~/sistemi/git/scripts/public/prism/drivers/micropythonbrd$ rshell
Connecting to /dev/ttyACM0 (buffer-size 512)...
Trying to connect to REPL . connected
Testing if sys.stdin.buffer exists ... Y
Retrieving root directories ... /flash/
Setting time ... Jul 23, 2019 22:04:02
Evaluating board_name ... pyboard
Retrieving time epoch ... Jan 01, 2000
Welcome to rshell. Use Control-D (or the exit command) to exit rshell.
/home/martin/sistemi/git/scripts/public/prism/drivers/micropythonbrd&gt; cp iba01_*.py /flash
/home/martin/sistemi/git/scripts/public/prism/drivers/micropythonbrd&gt; exit
</pre></div>
</div>
<p>Sometimes, rshell fails to copy files over, you get <strong>timed out or error in transfer to remote</strong>.
Switch to ampy to copy the files in this case,:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>.../iba01$ ampy --port /dev/ttyACM0 put iba01_supply12.py
.../iba01$ ampy --port /dev/ttyACM0 put iba01_const.py
.../iba01$ ampy --port /dev/ttyACM0 put iba01_INA220.py
.../iba01$ ampy --port /dev/ttyACM0 put iba01_perphs.py
.../iba01$ ampy --port /dev/ttyACM0 put iba01_queue.py
.../iba01$ ampy --port /dev/ttyACM0 put iba01_server.py
.../iba01$ ampy --port /dev/ttyACM0 put iba01_supply12.py
.../iba01$ ampy --port /dev/ttyACM0 put iba01_vbat.py
</pre></div>
</div>
</li>
</ol>
<p>3) The PyBoard internal filesystem can get corrupted when power is removed.  To avoid this, press
and hold the reset button when removing power.  The IBA01 design does this by design.</p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="_development.html"
                        title="previous chapter">Development</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="_security.html"
                        title="next chapter">Security</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="_security.html" title="Security"
             >next</a> |</li>
        <li class="right" >
          <a href="_development.html" title="Development"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Sistemi Lente/Prism Test System 0.2.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Test Jigs</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Sistemi Corp..
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.3.2.
    </div>
  </body>
</html>